# 설계 개선하기(Audience)
- TicketSeller가 sellTo 로직에서 Audience에 직접 접근하고 있다.(audience.getBag())
- Audience를 자율적인 존재로 캡슐화해서 Audience만 Bag에 접근할 수 있도록 변경한다.

## Audience 자율성 추가
![수정된 다이어그램: Audience에서 Bag 관련 접근을 직접 수행](https://github.com/nowv30/Object/blob/master/images/%EC%A3%BC%EC%84%9D%202020-07-16%20113424.png "수정된 다이어그램: Audience에서 Bag 관련 접근을 직접 수행")
- SellTo의 로직을 Audience가 가져간다.
```java
//관람객은 소지품을 보관할 가방을 소지한다.
public class Audience {
	private Bag bag;
	

	public Bag getBag() {
		return bag;
	}
	
	//3-1. TicketSeller의 SellTo 메소드의 로직을 Audience가 직접 수행한다.
	//   Audience 스스로 Bag의 내용물을 확인하고 다른 곳에서 알지 못하게 한다.
	public Long buy(Ticket ticket) {
		if(bag.hasInvitation()) {
			bag.setTicket(ticket);
			return 0L;
		} else {
			bag.setTicket(ticket);
			bag.minusAmount(ticket.getFee());
			return ticket.getFee();
		}		
	}
}


//티켓판매원은 초대장을 티켓을 교환하거나 티켓을 판매하는 역할을 한다.
//판매원은 자신이 일하는 매표소 위치를 알아야 한다.
public class TicketSeller {
	private TicketOffice ticketOffice;
	
	public TicketSeller(TicketOffice ticketOffice) {
		this.ticketOffice = ticketOffice;
	}
	
	
//	1-1. 이 메소드를 제거함으로 TIcketSeller 이외에 다른 클래스에서 TicketOffice에 직접 접근할 수 없다.
//	public TicketOffice getTicketOffice() {
//		return ticketOffice;
//	}
	
	//1-2. 기존에 Theater.enter(Audience audience)에 있던 로직을 가져왔다.
	//이제 티켓판매원이 판매를 직접 관리한다.
	public void sellTo(Audience audience) {
	//3-2. 아래 로직을 Audience로 이동한다. 이제 Audience의 buy 메소드 이외에 다른 정보를 알지 못한다.	
//		if(audience.getBag().hasInvitation()) {
//			Ticket ticket = ticketOffice.getTicket();
//			audience.getBag().setTicket(ticket);
//		}else {
//			Ticket ticket = ticketOffice.getTicket();
//			audience.getBag().minusAmount(ticket.getFee());
//			ticketOffice.plusAmount(ticket.getFee());
//			audience.getBag().setTicket(ticket);
//		}
		//3-3.audience의 buy메소드의 리턴값인 Long타입을 받아 ticketOffice의 amount를 추가한다.
		//역시 audience의 내부를 알지 못한다.
		ticketOffice.plusAmount(audience.buy(ticketOffice.getTicket()));		
	}
}

```
